<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para Anghi üåπ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Italiana&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* === 1. VARIABLES Y CONFIGURACI√ìN BASE === */
        :root {
            --ruby-deep: #881337;
            --ruby: #9d174d;
            --rose-bright: #fb7185;
            --rose: #f43f5e;
            --pink: #f472b6;
            --blush: #fecdd3;
            --cream: #fff1f2;
            --white-pure: #ffffff;
            --deep: #4c0519;
            --shimmer: #ffe4e6;
            --gold: #fbbf24;
            --shadow-ruby: rgba(136, 19, 55, 0.4);
            --shadow-soft: rgba(0, 0, 0, 0.1);
            
            --font-elegant: 'Italiana', serif;
            --font-display: 'Playfair Display', serif;
            --font-script: 'Cormorant Garamond', serif;
            --font-body: 'Poppins', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        html { scroll-behavior: smooth; }

        body {
            font-family: var(--font-body);
            background: 
                radial-gradient(circle at 20% 30%, rgba(251, 113, 133, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(244, 63, 94, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #fda4af 0%, #fecdd3 40%, #ffe4e6 70%, #fff1f2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            position: relative;
            padding: 20px;
        }

        /* === 2. EFECTOS DE FONDO ATMOSF√âRICOS === */
        #particles-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1; overflow: hidden;
        }

        /* Orbes luminosos mejorados */
        .light-orb {
            position: absolute; border-radius: 50%; filter: blur(60px);
            opacity: 0.25; animation: orbFloat 25s ease-in-out infinite; will-change: transform;
        }

        @keyframes orbFloat {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(60px, -60px) scale(1.3); }
            50% { transform: translate(-40px, 40px) scale(0.9); }
            75% { transform: translate(80px, 60px) scale(1.1); }
        }

        .floating-heart {
            position: absolute; opacity: 0;
            animation: floatHeart 16s ease-in-out infinite;
            font-size: 1.6rem; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.25));
            will-change: transform, opacity;
        }

        @keyframes floatHeart {
            0% { transform: translateY(110vh) translateX(0) rotate(0deg) scale(0); opacity: 0; }
            8% { opacity: 0.8; }
            50% { transform: translateY(50vh) translateX(50px) rotate(180deg) scale(1.4); opacity: 0.9; }
            92% { opacity: 0.7; }
            100% { transform: translateY(-15vh) translateX(-50px) rotate(360deg) scale(0.6); opacity: 0; }
        }

        .rose-petal {
            position: absolute; font-size: 1.4rem;
            animation: fallPetal 20s linear infinite;
            opacity: 0; filter: drop-shadow(0 3px 6px rgba(0,0,0,0.2));
            will-change: transform, opacity;
        }

        @keyframes fallPetal {
            0% { transform: translateY(-12vh) translateX(0) rotate(0deg); opacity: 0; }
            8% { opacity: 0.85; }
            92% { opacity: 0.6; }
            100% { transform: translateY(115vh) translateX(140px) rotate(1440deg); opacity: 0; }
        }

        /* Shimmer mejorado */
        .shimmer {
            position: fixed; width: 300%; height: 300%; top: -100%; left: -100%;
            background: 
                radial-gradient(ellipse at 30% 40%, rgba(255,255,255,0.15) 0%, transparent 60%),
                radial-gradient(ellipse at 70% 60%, rgba(251, 113, 133, 0.08) 0%, transparent 60%);
            animation: shimmerMove 30s ease-in-out infinite alternate;
            pointer-events: none; z-index: 0;
        }

        @keyframes shimmerMove {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(15%, 15%) rotate(3deg); }
        }

        /* Estrellas decorativas */
        .sparkle {
            position: absolute; width: 3px; height: 3px; background: white;
            border-radius: 50%; opacity: 0;
            animation: sparkleShine 4s ease-in-out infinite;
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
        }

        @keyframes sparkleShine {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        /* === 3. PANTALLA DE INTRO ULTRA PREMIUM === */
        #intro {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                radial-gradient(ellipse at 30% 20%, #f43f5e 0%, transparent 50%),
                radial-gradient(ellipse at 70% 80%, #fb7185 0%, transparent 50%),
                linear-gradient(145deg, #e11d48 0%, #fb7185 30%, #fda4af 60%, #fecdd3 100%);
            z-index: 9999; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            transition: opacity 1.4s cubic-bezier(0.4, 0, 0.2, 1), 
                        transform 1.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer; overflow: hidden;
        }

        #intro::before, #intro::after {
            content: ''; position: absolute; border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.25) 0%, transparent 70%);
            animation: pulseOrb 6s ease-in-out infinite;
        }

        #intro::before { width: 600px; height: 600px; top: -250px; left: -250px; }
        #intro::after { width: 500px; height: 500px; bottom: -200px; right: -200px; animation-delay: 1.5s; }

        @keyframes pulseOrb {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.15); }
        }

        #intro.fade-out { opacity: 0; transform: scale(1.2); pointer-events: none; }

        .intro-content { position: relative; z-index: 1; text-align: center; }

        .intro-rose {
            font-size: 10rem; animation: roseBloom 4s ease-in-out infinite;
            filter: drop-shadow(0 20px 50px rgba(0,0,0,0.4));
            transform-origin: center bottom; display: inline-block;
        }

        @keyframes roseBloom {
            0%, 100% { transform: scale(1) rotate(-3deg); filter: drop-shadow(0 20px 50px rgba(0,0,0,0.4)) brightness(1); }
            50% { transform: scale(1.25) rotate(3deg); filter: drop-shadow(0 25px 60px rgba(0,0,0,0.5)) brightness(1.1); }
        }

        .intro-title {
            font-family: var(--font-display); font-size: 5rem; color: white;
            text-shadow: 0 6px 30px rgba(0,0,0,0.4), 0 3px 15px rgba(255,255,255,0.4), 0 0 80px rgba(255,182,193,0.6);
            margin-top: 35px; font-weight: 700; letter-spacing: 4px;
            animation: titlePulse 4s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { text-shadow: 0 6px 30px rgba(0,0,0,0.4), 0 3px 15px rgba(255,255,255,0.4), 0 0 80px rgba(255,182,193,0.6); }
            50% { text-shadow: 0 8px 40px rgba(0,0,0,0.5), 0 4px 20px rgba(255,255,255,0.6), 0 0 100px rgba(255,182,193,0.8); }
        }

        .intro-subtitle {
            color: rgba(255,255,255,0.95); font-size: 1.3rem; margin-top: 20px;
            font-weight: 400; letter-spacing: 2px; animation: subtitleFloat 3s ease-in-out infinite;
        }

        @keyframes subtitleFloat {
            0%, 100% { opacity: 0.75; transform: translateY(0); }
            50% { opacity: 1; transform: translateY(-5px); }
        }

        /* === 4. TARJETA PRINCIPAL ULTRA PREMIUM === */
        main {
            width: 100%; display: flex; justify-content: center; z-index: 10; position: relative;
        }

        .card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 241, 242, 0.95) 50%, rgba(254, 226, 230, 0.93) 100%);
            backdrop-filter: blur(40px) saturate(200%); -webkit-backdrop-filter: blur(40px) saturate(200%);
            width: 100%; max-width: 580px; border-radius: 50px; padding: 60px 50px;
            box-shadow: 0 40px 120px rgba(136, 19, 55, 0.35), 0 20px 60px rgba(0,0,0,0.15), 0 5px 20px rgba(251, 113, 133, 0.2), inset 0 2px 0 rgba(255,255,255,0.95), inset 0 -2px 0 rgba(251, 113, 133, 0.15);
            text-align: center; opacity: 0; transform: translateY(100px) scale(0.9);
            transition: all 1.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative; border: 2px solid rgba(255,255,255,0.8);
        }

        .card.visible { opacity: 1; transform: translateY(0) scale(1); }

        /* Decoraciones esquinas premium */
        .corner-deco {
            position: absolute; font-size: 4rem; filter: drop-shadow(4px 10px 15px rgba(136, 19, 55, 0.4));
            animation: gentleSway 5s ease-in-out infinite; z-index: 2; transition: transform 0.3s ease;
        }
        .corner-deco:hover { transform: scale(1.2) !important; }
        .corner-deco.top-left { top: -30px; left: -25px; transform: rotate(-30deg); }
        .corner-deco.top-right { top: -30px; right: -25px; transform: rotate(30deg); animation-delay: 0.7s; }
        .corner-deco.bottom-left { bottom: -30px; left: -25px; transform: rotate(-150deg); animation-delay: 1.4s; }
        .corner-deco.bottom-right { bottom: -30px; right: -25px; transform: rotate(150deg); animation-delay: 2.1s; }

        @keyframes gentleSway { 
            0%, 100% { transform: rotate(-30deg) translateY(0) scale(1); filter: drop-shadow(4px 10px 15px rgba(136, 19, 55, 0.4)); } 
            50% { transform: rotate(-25deg) translateY(-10px) scale(1.15); filter: drop-shadow(6px 15px 20px rgba(136, 19, 55, 0.5)); } 
        }

        /* Header ultra premium */
        header { position: relative; margin-bottom: 40px; }

        h1 {
            font-family: var(--font-display); font-size: 6rem;
            background: linear-gradient(145deg, var(--ruby-deep) 0%, var(--ruby) 25%, var(--rose) 50%, var(--pink) 75%, var(--rose-bright) 100%);
            background-size: 200% 200%; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-clip: text; line-height: 1; margin-bottom: 15px; font-weight: 700;
            letter-spacing: 3px; position: relative; display: inline-block;
            filter: drop-shadow(0 5px 12px rgba(136, 19, 55, 0.2));
            animation: gradientShift 8s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        h1::after {
            content: ''; position: absolute; bottom: -18px; left: 50%; transform: translateX(-50%);
            width: 100px; height: 5px;
            background: linear-gradient(90deg, transparent, var(--rose), var(--gold), var(--rose), transparent);
            border-radius: 10px; animation: lineGlow 4s ease-in-out infinite;
        }

        @keyframes lineGlow {
            0%, 100% { opacity: 0.5; width: 100px; }
            50% { opacity: 1; width: 120px; }
        }

        .subtitle {
            font-size: 1rem; color: var(--deep); text-transform: uppercase; letter-spacing: 5px;
            font-weight: 600; opacity: 0.75;
        }

        /* === 5. REPRODUCTOR ULTRA PREMIUM === */
        .player-wrapper {
            background: linear-gradient(145deg, #ffffff 0%, #fef2f2 30%, #fff1f2 70%, #ffe4e6 100%);
            border-radius: 35px; padding: 35px 30px;
            box-shadow: inset 0 4px 30px rgba(251, 113, 133, 0.15), inset 0 -2px 20px rgba(255, 255, 255, 0.5), 0 15px 50px rgba(136, 19, 55, 0.12), 0 5px 20px rgba(0,0,0,0.08);
            margin: 40px 0; border: 2px solid rgba(251, 113, 133, 0.2); position: relative; overflow: hidden;
        }

        .player-wrapper::before {
            content: ''; position: absolute; top: 0; left: -200%; width: 200%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.7), transparent);
            animation: shimmerSweep 5s infinite;
        }

        @keyframes shimmerSweep {
            0% { left: -200%; } 100% { left: 200%; }
        }

        .controls {
            display: flex; align-items: center; gap: 25px; margin-bottom: 25px;
            border-bottom: 2px solid rgba(251, 113, 133, 0.18); padding-bottom: 25px;
            position: relative; z-index: 1;
        }

        .play-btn {
            width: 75px; height: 75px;
            background: linear-gradient(145deg, var(--ruby-deep) 0%, var(--ruby) 30%, var(--rose) 70%, var(--pink) 100%);
            border-radius: 50%; display: flex; justify-content: center; align-items: center;
            color: white; border: none; font-size: 1.5rem; cursor: pointer;
            box-shadow: 0 12px 35px rgba(136, 19, 55, 0.5), 0 6px 20px rgba(0,0,0,0.2), inset 0 2px 0 rgba(255,255,255,0.4), inset 0 -2px 10px rgba(0,0,0,0.2);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); position: relative; overflow: hidden;
        }

        .play-btn::before {
            content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0;
            border-radius: 50%; background: rgba(255,255,255,0.5);
            transform: translate(-50%, -50%); transition: width 0.8s, height 0.8s;
        }

        .play-btn:active::before { width: 200%; height: 200%; }
        .play-btn:hover { transform: scale(1.1) translateY(-2px); box-shadow: 0 18px 50px rgba(136, 19, 55, 0.6), 0 10px 30px rgba(0,0,0,0.25); }
        .play-btn:active { transform: scale(1); }

        .visualizer {
            display: flex; align-items: center; justify-content: center; gap: 7px;
            height: 50px; flex-grow: 1; padding: 0 15px;
        }

        .bar {
            width: 8px; background: linear-gradient(180deg, var(--rose-bright) 0%, var(--rose) 30%, var(--pink) 70%, var(--blush) 100%);
            border-radius: 12px; height: 12px; transition: all 0.4s ease; opacity: 0.3;
            box-shadow: 0 3px 8px rgba(251, 113, 133, 0.3);
        }

        .playing .bar { animation: audioPulse 0.8s ease-in-out infinite alternate; opacity: 1; box-shadow: 0 6px 15px rgba(251, 113, 133, 0.6); }
        .playing .bar:nth-child(odd) { animation-duration: 0.6s; }
        .playing .bar:nth-child(even) { animation-duration: 0.8s; }

        @keyframes audioPulse {
            from { height: 12px; filter: brightness(1); }
            to { height: 100%; filter: brightness(1.3); }
        }

        .time-display {
            font-size: 0.95rem; color: var(--ruby); font-weight: 700; min-width: 50px;
            text-align: right; font-variant-numeric: tabular-nums; text-shadow: 0 1px 3px rgba(136, 19, 55, 0.2);
        }

        .lyrics-box {
            font-size: 1.3rem; line-height: 2.2; color: #94a3b8; min-height: 90px;
            font-family: var(--font-script); font-style: italic; position: relative;
            display: flex; flex-wrap: wrap; justify-content: center; align-items: center;
            padding: 15px; z-index: 1;
        }

        .word { transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); display: inline-block; margin: 0 6px; font-weight: 400; }
        .word.active {
            color: var(--ruby); font-weight: 700; transform: scale(1.15) translateY(-4px);
            text-shadow: 0 5px 12px rgba(136, 19, 55, 0.3), 0 0 25px rgba(251, 113, 133, 0.4);
            filter: brightness(1.3);
        }

        /* === 6. MENSAJE PRINCIPAL PREMIUM === */
        .main-message {
            margin-top: 40px; padding: 35px;
            background: linear-gradient(145deg, rgba(254, 205, 211, 0.4) 0%, rgba(255, 241, 242, 0.35) 50%, rgba(255, 228, 230, 0.4) 100%);
            border-radius: 30px; border: 2px solid rgba(251, 113, 133, 0.3);
            line-height: 1.9; color: var(--deep);
            box-shadow: inset 0 3px 20px rgba(255, 255, 255, 0.6), 0 10px 30px rgba(136, 19, 55, 0.1);
        }

        .main-message p { margin: 0; font-size: 1.15rem; font-weight: 400; }
        .main-message strong {
            color: var(--ruby); font-size: 1.5rem; display: block; margin-top: 18px;
            font-family: var(--font-script); font-style: italic; font-weight: 700;
            text-shadow: 0 3px 10px rgba(136, 19, 55, 0.2);
        }

        /* === 7. BOTONES ULTRA PREMIUM === */
        .actions {
            display: flex; flex-direction: column; align-items: center; gap: 20px;
            margin-top: 45px; position: relative; min-height: 150px;
        }

        .btn {
            padding: 22px 50px; border-radius: 50px; border: none; font-weight: 700; font-size: 1.15rem;
            cursor: pointer; font-family: var(--font-body); letter-spacing: 0.5px;
            position: relative; overflow: hidden; user-select: none; -webkit-user-select: none;
        }

        .btn::before {
            content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0;
            border-radius: 50%; background: rgba(255,255,255,0.5);
            transform: translate(-50%, -50%); transition: width 0.8s, height 0.8s; pointer-events: none;
        }

        .btn:active::before { width: 400px; height: 400px; }

        .btn-yes {
            background: linear-gradient(145deg, var(--ruby-deep) 0%, var(--ruby) 25%, var(--rose) 50%, var(--pink) 75%, var(--rose-bright) 100%);
            background-size: 200% 200%; color: white;
            box-shadow: 0 15px 45px rgba(136, 19, 55, 0.45), 0 8px 25px rgba(0,0,0,0.2), inset 0 2px 0 rgba(255,255,255,0.4);
            z-index: 10; animation: btnGradient 6s ease-in-out infinite;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); order: 1;
        }

        @keyframes btnGradient { 0%, 100% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } }

        .btn-yes:hover { transform: translateY(-5px) scale(1.05); box-shadow: 0 22px 60px rgba(136, 19, 55, 0.55), 0 12px 35px rgba(0,0,0,0.25); }
        .btn-yes:active { transform: translateY(-2px) scale(1.02); }

        .btn-no {
            background: linear-gradient(145deg, #ffffff 0%, #fef2f2 100%);
            color: #94a3b8; border: 3px solid #f1f5f9;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            will-change: left, top, transform, opacity; z-index: 5; order: 2; position: relative;
        }

        .btn-no.escaping { pointer-events: none; position: fixed !important; }

        /* === 8. MODAL FINAL ULTRA PREMIUM === */
        dialog {
            border: none; border-radius: 50px; padding: 60px 50px; width: 90%; max-width: 500px;
            text-align: center;
            background: linear-gradient(145deg, #ffffff 0%, #fef2f2 40%, #fff1f2 70%, #ffe4e6 100%);
            box-shadow: 0 50px 120px rgba(0,0,0,0.4), 0 20px 60px rgba(136, 19, 55, 0.3), inset 0 2px 0 rgba(255,255,255,0.95);
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7);
            opacity: 0; transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid rgba(255,255,255,0.9);
        }

        dialog[open] { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        dialog::backdrop { background: rgba(136, 19, 55, 0.6); backdrop-filter: blur(20px); animation: backdropFadeIn 0.6s; }
        @keyframes backdropFadeIn { from { opacity: 0; } to { opacity: 1; } }

        .modal-icon { font-size: 7rem; animation: modalBounce 1.5s infinite; display: inline-block; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3)); }
        @keyframes modalBounce { 0%, 100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-25px) scale(1.15); } }

        .modal-title {
            font-family: var(--font-display);
            background: linear-gradient(145deg, var(--ruby-deep) 0%, var(--ruby) 30%, var(--rose) 60%, var(--pink) 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            font-size: 4.5rem; margin: 25px 0; font-weight: 700;
            filter: drop-shadow(0 5px 12px rgba(136, 19, 55, 0.2));
        }

        .modal-text { color: #64748b; line-height: 2; font-size: 1.2rem; margin: 30px 0; }
        .modal-text strong { color: var(--ruby); font-weight: 700; font-size: 1.35rem; }

        /* Bot√≥n de WhatsApp */
        .whatsapp-link {
            display: block; background: linear-gradient(145deg, #25D366 0%, #20B558 50%, #128C7E 100%);
            color: white; text-decoration: none; padding: 22px 40px; border-radius: 35px;
            font-weight: 700; font-size: 1.15rem; margin: 35px 0 15px 0;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 12px 35px rgba(37, 211, 102, 0.4), 0 5px 20px rgba(0,0,0,0.15);
        }
        .whatsapp-link:hover { transform: translateY(-4px); box-shadow: 0 18px 50px rgba(37, 211, 102, 0.5), 0 8px 30px rgba(0,0,0,0.2); }
        .whatsapp-link:active { transform: translateY(-2px); }

        .copy-btn {
            background: linear-gradient(145deg, #f1f5f9 0%, #e2e8f0 100%);
            color: #64748b; border: 2px solid #cbd5e1; padding: 12px 25px; border-radius: 20px;
            font-weight: 600; font-size: 0.9rem; cursor: pointer; transition: all 0.3s;
            font-family: var(--font-body); margin-bottom: 10px;
        }
        .copy-btn:hover { background: linear-gradient(145deg, #e2e8f0 0%, #cbd5e1 100%); color: #475569; border-color: #94a3b8; transform: translateY(-2px); }
        .copy-btn:active { transform: translateY(0); }

        .close-btn {
            background: none; border: none; margin-top: 20px; color: #94a3b8; text-decoration: underline;
            cursor: pointer; font-size: 1.05rem; transition: color 0.4s; font-weight: 500;
        }
        .close-btn:hover { color: var(--ruby); }

        #float-msg {
            position: fixed; background: linear-gradient(145deg, var(--deep) 0%, var(--ruby) 100%);
            color: white; padding: 16px 28px; border-radius: 35px; pointer-events: none; opacity: 0;
            z-index: 100; font-size: 1rem; box-shadow: 0 12px 35px rgba(0,0,0,0.4), 0 5px 20px rgba(136, 19, 55, 0.3);
            transition: opacity 0.5s; font-weight: 600; border: 2px solid rgba(255,255,255,0.3);
        }

        /* === 10. RESPONSIVE MEJORADO === */
        @media (max-width: 600px) {
            h1 { font-size: 4rem; } .intro-title { font-size: 3.5rem; } .intro-rose { font-size: 7rem; }
            .card { padding: 50px 35px; max-width: 100%; } .corner-deco { font-size: 3rem; }
            .player-wrapper { padding: 30px 25px; } .play-btn { width: 65px; height: 65px; }
            .lyrics-box { font-size: 1.15rem; } .main-message { padding: 28px 22px; }
            .btn { padding: 18px 35px; font-size: 1rem; } .modal-title { font-size: 3.5rem; }
            dialog { padding: 50px 35px; }
        }
    </style>
</head>
<body>

    <div class="shimmer"></div>
    <div id="particles-container"></div>

    <audio id="audio-file" src="audio.mp3" preload="metadata"></audio>

    <div id="intro" onclick="openLetter()">
        <div class="intro-content">
            <div class="intro-rose">üåπ</div>
            <h2 class="intro-title">Para Anghi</h2>
            <p class="intro-subtitle">(Toca la rosa para abrir)</p>
        </div>
    </div>

    <div id="float-msg">Pi√©nsalo bien... ü•∫</div>

    <main>
        <div class="card" id="card">
            <div class="corner-deco top-left">üåπ</div>
            <div class="corner-deco top-right">üåπ</div>
            <div class="corner-deco bottom-left">üíù</div>
            <div class="corner-deco bottom-right">üíù</div>

            <header>
                <h1>Anghi</h1>
                <p class="subtitle">Escucha esto, por favor</p>
            </header>

            <div class="player-wrapper">
                <div class="controls">
                    <button class="play-btn" onclick="togglePlay()" aria-label="Play/Pause">
                        <span id="play-icon" style="margin-left:3px">‚ñ∂</span>
                    </button>
                    <div class="visualizer" id="visualizer">
                        <div class="bar"></div><div class="bar"></div><div class="bar"></div>
                        <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
                    </div>
                    <div class="time-display" id="time">0:00</div>
                </div>

                <div class="lyrics-box" id="lyrics">
                    <span style="opacity:0.5;">Dale play para escuchar... üéµ</span>
                </div>
            </div>

            <div class="main-message">
                <p>
                    Prometo cuidar tu coraz√≥n como nunca antes.
                    <strong>¬øMe das una oportunidad?</strong>
                </p>
            </div>

            <div class="actions">
                <button class="btn btn-yes" onclick="sayYes()">S√≠, hablemos ‚ù§Ô∏è</button>
                <button class="btn btn-no" id="btn-no">No</button>
            </div>
        </div>
    </main>

    <dialog id="final-modal">
        <div class="modal-icon">üéà</div>
        <h2 class="modal-title">¬°Gracias!</h2>
        <p class="modal-text">
            Te quiero mucho <strong>Anghi</strong>.<br>
            No te fallar√©.
        </p>
        <a href="https://wa.me/51941439651?text=Hola.%20Vi%20tu%20mensaje...%20Hablemos.%20üåπ" target="_blank" class="whatsapp-link">
            Enviar mensaje a WhatsApp 
        </a>
        <button class="copy-btn" onclick="copyText()">
            Copiar mensaje 
        </button>
        <button class="close-btn" onclick="document.getElementById('final-modal').close()">
            Cerrar
        </button>
    </dialog>

    <script>
        // === CONFIGURACI√ìN ===
        const transcript = [
            { text: "Comet√≠ el peor error de mi vida...", start: 0, end: 3.5 },
            { text: "herir a quien m√°s amo.", start: 3.5, end: 6.5 },
            { text: "No busco excusas,", start: 6.5, end: 8.5 },
            { text: "solo tu perd√≥n sincero.", start: 8.5, end: 11 },
            { text: "Te extra√±o m√°s de lo que mis palabras pueden decir.", start: 11, end: 16.5 },
            { text: "No quiero un final...", start: 16.5, end: 18.5 },
            { text: "quiero volver a empezar contigo.", start: 18.5, end: 22 },
            { text: "Prometo cuidar tu coraz√≥n como no lo hice antes.", start: 22, end: 27 },
            { text: "Dame una oportunidad... Por favor.", start: 27, end: 30.5 },
            { text: "A√∫n creo en nosotros.", start: 30.5, end: 35 }
        ];

        // === ELEMENTOS DEL DOM ===
        const audio = document.getElementById('audio-file');
        const lyricsBox = document.getElementById('lyrics');
        const playIcon = document.getElementById('play-icon');
        const visualizer = document.getElementById('visualizer');
        const timeDisplay = document.getElementById('time');
        const intro = document.getElementById('intro');
        const card = document.getElementById('card');

        // === FUNCI√ìN: ABRIR CARTA ===
        function openLetter() {
            intro.classList.add('fade-out');
            setTimeout(() => {
                intro.style.display = 'none';
                card.classList.add('visible');
                createParticles();
                createLightOrbs();
                createSparkles();
                setupLyrics();
                initNaughtyButton();
            }, 1200);
        }

        // === FUNCI√ìN: CREAR ORBES LUMINOSOS ===
        function createLightOrbs() {
            const container = document.getElementById('particles-container');
            const colors = ['#fda4af', '#fb7185', '#f43f5e', '#fecdd3', '#ffe4e6'];
            
            for(let i = 0; i < 6; i++) {
                const orb = document.createElement('div');
                orb.className = 'light-orb';
                orb.style.width = (Math.random() * 250 + 150) + 'px';
                orb.style.height = orb.style.width;
                orb.style.background = colors[Math.floor(Math.random() * colors.length)];
                orb.style.left = Math.random() * 100 + '%';
                orb.style.top = Math.random() * 100 + '%';
                orb.style.animationDuration = (Math.random() * 15 + 20) + 's';
                orb.style.animationDelay = Math.random() * 8 + 's';
                container.appendChild(orb);
            }
        }

        // === FUNCI√ìN: CREAR ESTRELLAS ===
        function createSparkles() {
            const container = document.getElementById('particles-container');
            
            for(let i = 0; i < 30; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 4 + 's';
                container.appendChild(sparkle);
            }
        }

        // === FUNCI√ìN: CREAR PART√çCULAS FLOTANTES ===
        function createParticles() {
            const container = document.getElementById('particles-container');
            
            // Corazones flotantes premium
            const hearts = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíù', 'üíû', 'üíü', 'ü©∑'];
            for(let i = 0; i < 18; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerText = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 8 + 14) + 's';
                heart.style.animationDelay = Math.random() * 12 + 's';
                heart.style.fontSize = (Math.random() * 1 + 1.4) + 'rem';
                container.appendChild(heart);
            }

            // P√©talos cayendo premium
            const petals = ['üåπ', 'üå∏', 'üíÆ', 'üèµÔ∏è', 'üå∫', 'üå∑'];
            for(let i = 0; i < 25; i++) {
                const petal = document.createElement('div');
                petal.className = 'rose-petal';
                petal.innerText = petals[Math.floor(Math.random() * petals.length)];
                petal.style.left = Math.random() * 100 + '%';
                petal.style.animationDuration = (Math.random() * 10 + 18) + 's';
                petal.style.animationDelay = Math.random() * 15 + 's';
                petal.style.fontSize = (Math.random() * 0.8 + 1.2) + 'rem';
                container.appendChild(petal);
            }
        }

        // === FUNCI√ìN: CONFIGURAR LETRAS ===
        function setupLyrics() {
            lyricsBox.innerHTML = '';
            transcript.forEach((line, i) => {
                const span = document.createElement('span');
                span.innerText = line.text + ' ';
                span.className = 'word';
                span.id = 'w-' + i;
                lyricsBox.appendChild(span);
            });
        }

        // === FUNCI√ìN: REPRODUCIR/PAUSAR ===
        function togglePlay() {
            if(audio.paused) {
                audio.play();
                playIcon.innerText = "‚è∏";
                visualizer.classList.add('playing');
            } else {
                audio.pause();
                playIcon.innerText = "‚ñ∂";
                visualizer.classList.remove('playing');
            }
        }

        // === EVENTO: ACTUALIZACI√ìN DE TIEMPO ===
        audio.addEventListener('timeupdate', () => {
            const t = audio.currentTime;
            const m = Math.floor(t / 60);
            const s = Math.floor(t % 60);
            timeDisplay.innerText = `${m}:${s < 10 ? '0' : ''}${s}`;

            transcript.forEach((line, i) => {
                const el = document.getElementById('w-' + i);
                if(el && t >= line.start && t < line.end) {
                    el.classList.add('active');
                } else if(el) {
                    el.classList.remove('active');
                }
            });
        });

        // === EVENTO: AUDIO TERMINADO ===
        audio.addEventListener('ended', () => {
            playIcon.innerText = "‚ñ∂";
            visualizer.classList.remove('playing');
        });

        // === FUNCI√ìN: BOT√ìN TRAVIESO ULTRA ===
        function initNaughtyButton() {
            const btnNo = document.getElementById('btn-no');
            const floatMsg = document.getElementById('float-msg');
            const messages = [
                "Pi√©nsalo bien... ü•∫", "¬°No te vayas! üíî", "Dame una oportunidad üåπ", "Por favor... ü•π",
                "Solo una chance üíï", "Te prometo cambiar üíó", "No me dejes... üò¢", "Una √∫ltima oportunidad üôè"
            ];

            let escapeCount = 0;
            let isEscaping = false;

            const runAway = (e) => {
                if (isEscaping) return;
                e.preventDefault(); e.stopPropagation();
                
                isEscaping = true; escapeCount++;
                btnNo.classList.add('escaping');
                btnNo.style.position = 'fixed'; btnNo.style.zIndex = '5';
                
                const btnWidth = btnNo.offsetWidth; const btnHeight = btnNo.offsetHeight;
                const maxX = window.innerWidth - btnWidth - 30; const maxY = window.innerHeight - btnHeight - 30;
                let newX, newY; let attempts = 0; const minDistance = 150;
                
                do {
                    newX = Math.random() * maxX; newY = Math.random() * maxY; attempts++;
                    if (e.clientX && e.clientY) {
                        const distX = Math.abs(newX - e.clientX); const distY = Math.abs(newY - e.clientY);
                        const distance = Math.sqrt(distX * distX + distY * distY);
                        if (distance > minDistance || attempts > 10) break;
                    } else break;
                } while (attempts < 10);
                
                newX = Math.max(20, newX); newY = Math.max(20, newY);
                btnNo.style.left = newX + 'px'; btnNo.style.top = newY + 'px';

                const newScale = Math.max(0.5, 1 - (escapeCount * 0.06));
                const newOpacity = Math.max(0.5, 1 - (escapeCount * 0.05));
                btnNo.style.transform = `scale(${newScale})`; btnNo.style.opacity = newOpacity;

                const msg = messages[Math.min(escapeCount - 1, messages.length - 1)];
                floatMsg.innerText = msg; floatMsg.style.opacity = 1;
                floatMsg.style.left = (newX + btnWidth / 2) + 'px'; floatMsg.style.top = (newY - 70) + 'px';
                floatMsg.style.transform = 'translateX(-50%)';
                
                setTimeout(() => { floatMsg.style.opacity = 0; }, 2000);
                setTimeout(() => { isEscaping = false; btnNo.classList.remove('escaping'); }, 350);
            };

            btnNo.addEventListener('mouseenter', (e) => { if (window.innerWidth > 768) runAway(e); });
            btnNo.addEventListener('mouseover', (e) => { if (window.innerWidth > 768) runAway(e); });
            btnNo.addEventListener('touchstart', (e) => { runAway(e); }, { passive: false });
            btnNo.addEventListener('click', (e) => { runAway(e); });
            btnNo.addEventListener('mousedown', (e) => { e.preventDefault(); runAway(e); });
        }

        // === FUNCI√ìN: DECIR S√ç ===
        function sayYes() {
            const modal = document.getElementById('final-modal');
            modal.showModal();

            const heartTypes = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíù', 'üíû', 'üíü', 'ü©∑', '‚ù£Ô∏è'];
            for(let i = 0; i < 80; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.innerText = heartTypes[Math.floor(Math.random() * heartTypes.length)];
                    heart.style.position = 'fixed'; heart.style.left = Math.random() * 100 + '%'; heart.style.top = '-10%';
                    heart.style.fontSize = (Math.random() * 2.5 + 1.5) + 'rem';
                    heart.style.animation = `fallPetal ${Math.random() * 2 + 3}s linear`;
                    heart.style.zIndex = 10001; heart.style.pointerEvents = 'none';
                    heart.style.filter = 'drop-shadow(0 5px 10px rgba(0,0,0,0.4))';
                    document.body.appendChild(heart);
                    setTimeout(() => heart.remove(), 5000);
                }, i * 40);
            }
        }

        // === FUNCI√ìN: COPIAR TEXTO ===
        function copyText() {
            const message = "Hola. Vi tu mensaje... Hablemos. üåπ";
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(message).then(() => {
                    alert("¬°Mensaje copiado! üíï\nAhora p√©galo en WhatsApp.");
                }).catch(() => { promptFallback(message); });
            } else { promptFallback(message); }
        }

        function promptFallback(message) {
            const textarea = document.createElement('textarea');
            textarea.value = message; textarea.style.position = 'fixed'; textarea.style.opacity = '0';
            document.body.appendChild(textarea); textarea.select();
            try { document.execCommand('copy'); alert("¬°Mensaje copiado! üíï\nAhora p√©galo en WhatsApp."); } catch (err) { alert("Mensaje para copiar:\n\n" + message); }
            document.body.removeChild(textarea);
        }
    </script>
</body>
</html>